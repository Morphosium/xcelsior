(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});

const index_1 = require("./index"); //@ts-ignore


window.xcelsior = index_1.default;

},{"./index":2}],2:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.GridViewXcelsiorHTMLElement = exports.ScrollableXcelsiorHTMLElement = exports.RootXcelsiorHTMLElement = exports.XcelsiorHTMLElement = exports.MobileSidebarUtil = void 0;
const SHOW_ON_MOBILE_CLASS = "show-on-mobile";
const SECTION_NAME_ATTR = "section-name";
const SIDEBAR_CLASS = "sidebar";
const MOBILE_SAFE_VIEW = "mobile-view-safe";

class Util {
  /**
   * returns element fallback
   * @param el html element or selector
   */
  static nativeHTMLElement(el) {
    if (typeof el === "string") {
      return document.querySelector(el);
    } else {
      return el;
    }
  }

}

class MobileSidebarUtil {
  /**
   * When on small screens, if mobile view management is enabled on sidebar,
   * sidebar sections will be shown or hidden. If sectionName is not
   * @param element
   * @param sectionName
   */
  static toggleSidebarSection(element, sectionName, scrollUpSidebar = true) {
    var _a;

    const nativeElement = Util.nativeHTMLElement(element);
    const sidebarList = nativeElement.querySelectorAll(`.${MOBILE_SAFE_VIEW} > .wrap > .inner > .${SIDEBAR_CLASS}`);

    for (let sidebarIndex = 0; sidebarIndex < sidebarList.length; sidebarIndex++) {
      const sidebar = sidebarList[sidebarIndex];
      sidebar.classList.remove(SHOW_ON_MOBILE_CLASS);

      if (sidebar.getAttribute(SECTION_NAME_ATTR) === sectionName) {
        sidebar.classList.add(SHOW_ON_MOBILE_CLASS);
        if (scrollUpSidebar) sidebar.scrollTop = 0;
      }
    }

    const contentElementClassList = (_a = nativeElement.querySelector(`.content`)) === null || _a === void 0 ? void 0 : _a.classList;
    if (sectionName) contentElementClassList.add("hide");else {
      contentElementClassList.remove("hide");
    }
  }

}

exports.MobileSidebarUtil = MobileSidebarUtil;
exports.default = {
  Util,
  MobileSidebarUtil
};

const initXcelsiorElement = element => {
  var _a, _b;

  const wrapSupposed = element === null || element === void 0 ? void 0 : element.firstChild;
  const innerSupposed = wrapSupposed === null || wrapSupposed === void 0 ? void 0 : wrapSupposed.firstChild;

  if (((_a = wrapSupposed === null || wrapSupposed === void 0 ? void 0 : wrapSupposed.classList) === null || _a === void 0 ? void 0 : _a.contains("wrap")) && ((_b = innerSupposed === null || innerSupposed === void 0 ? void 0 : innerSupposed.classList) === null || _b === void 0 ? void 0 : _b.contains("inner"))) {//nothing
  } else if (element.getAttribute("no-auto-wrap") == null) {
    // create "wrap" and "inner" elements and move children into new "inner" element.
    const wrap = document.createElement("div");
    wrap.classList.add("wrap");
    const inner = document.createElement("div");
    inner.classList.add("inner");
    wrap.appendChild(inner); //All child elements (event texts) moved to by inner.append successfully

    inner.append(...element.childNodes);
    element.appendChild(wrap);
  }
};

class XcelsiorHTMLElement extends HTMLElement {
  constructor() {
    super();
    window.addEventListener("load", () => {
      initXcelsiorElement(this);
      const inner = this.children[0].children[0];

      for (let childIndex = 0; childIndex < inner.children.length; childIndex++) {
        const innerChild = inner.children[childIndex];
        innerChild.realParent = this;
        innerChild.draggable = true;
        innerChild.addEventListener("dragstart", ev => {
          this.draggingInnerElement = innerChild;
        });
        innerChild.addEventListener("dragover", e => {
          e.returnValue = false;
        });
        innerChild.addEventListener("drop", e => {
          if (innerChild.realParent === this) {
            // const index = Array.prototype.indexOf.call(innerChild.parentElement.children, this.draggingInnerElement);
            innerChild.insertAdjacentElement("beforebegin", this.draggingInnerElement);
          }
        });
      }
    });
  }

}

exports.XcelsiorHTMLElement = XcelsiorHTMLElement;

class RootXcelsiorHTMLElement extends HTMLElement {}

exports.RootXcelsiorHTMLElement = RootXcelsiorHTMLElement;

class ScrollableXcelsiorHTMLElement extends XcelsiorHTMLElement {}

exports.ScrollableXcelsiorHTMLElement = ScrollableXcelsiorHTMLElement;

class GridViewXcelsiorHTMLElement extends XcelsiorHTMLElement {}

exports.GridViewXcelsiorHTMLElement = GridViewXcelsiorHTMLElement;

if (typeof customElements.get("xcelsior-root") === "undefined") {
  customElements.define("xcelsior-root", RootXcelsiorHTMLElement);
}

if (typeof customElements.get("xcelsior-scrollable") === "undefined") {
  customElements.define("xcelsior-scrollable", ScrollableXcelsiorHTMLElement);
}

if (typeof customElements.get("xcelsior-grid-view") === "undefined") {
  customElements.define("xcelsior-grid-view", GridViewXcelsiorHTMLElement);
}

},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvdHMvYnJvd3Nlci1zYWZlLnRzIiwic3JjL3RzL2luZGV4LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7O0FDQUEsTUFBQSxPQUFBLEdBQUEsT0FBQSxDQUFBLFNBQUEsQ0FBQSxDLENBQ0E7OztBQUNBLE1BQU0sQ0FBQyxRQUFQLEdBQWtCLE9BQUEsQ0FBQSxPQUFsQjs7Ozs7Ozs7O0FDREEsTUFBTSxvQkFBb0IsR0FBRyxnQkFBN0I7QUFDQSxNQUFNLGlCQUFpQixHQUFHLGNBQTFCO0FBQ0EsTUFBTSxhQUFhLEdBQUcsU0FBdEI7QUFDQSxNQUFNLGdCQUFnQixHQUFHLGtCQUF6Qjs7QUFFQSxNQUFNLElBQU4sQ0FBVTtBQUVOOzs7QUFHRztBQUNxQixTQUFqQixpQkFBaUIsQ0FBQyxFQUFELEVBQXNCO0FBQzFDLFFBQUksT0FBTyxFQUFQLEtBQWMsUUFBbEIsRUFBNEI7QUFDeEIsYUFBTyxRQUFRLENBQUMsYUFBVCxDQUF1QixFQUF2QixDQUFQO0FBQ0gsS0FGRCxNQUdLO0FBQ0QsYUFBTyxFQUFQO0FBQ0g7QUFDSjs7QUFiSzs7QUFnQlYsTUFBYSxpQkFBYixDQUE4QjtBQUcxQjs7Ozs7QUFLRztBQUN3QixTQUFwQixvQkFBb0IsQ0FBQyxPQUFELEVBQTZCLFdBQTdCLEVBQW1ELGVBQWUsR0FBRyxJQUFyRSxFQUF5RTs7O0FBQ2hHLFVBQU0sYUFBYSxHQUFHLElBQUksQ0FBQyxpQkFBTCxDQUF1QixPQUF2QixDQUF0QjtBQUNBLFVBQU0sV0FBVyxHQUFHLGFBQWEsQ0FBQyxnQkFBZCxDQUErQixJQUFJLGdCQUFnQix3QkFBd0IsYUFBYSxFQUF4RixDQUFwQjs7QUFDQSxTQUFLLElBQUksWUFBWSxHQUFHLENBQXhCLEVBQTJCLFlBQVksR0FBRyxXQUFXLENBQUMsTUFBdEQsRUFBOEQsWUFBWSxFQUExRSxFQUE4RTtBQUMxRSxZQUFNLE9BQU8sR0FBRyxX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QW9FOztBQUFwRSxPQUFBLENBQUEsMkJBQUEsR0FBQSwyQkFBQTs7QUFDQSxJQUFJLE9BQU8sY0FBYyxDQUFDLEdBQWYsQ0FBbUIsZUFBbkIsQ0FBUCxLQUErQyxXQUFuRCxFQUFnRTtBQUM1RCxFQUFBLGNBQWMsQ0FBQyxNQUFmLENBQXNCLGVBQXRCLEVBQXVDLHVCQUF2QztBQUNIOztBQUNELElBQUksT0FBTyxjQUFjLENBQUMsR0FBZixDQUFtQixxQkFBbkIsQ0FBUCxLQUFxRCxXQUF6RCxFQUFzRTtBQUNsRSxFQUFBLGNBQWMsQ0FBQyxNQUFmLENBQXNCLHFCQUF0QixFQUE2Qyw2QkFBN0M7QUFDSDs7QUFDRCxJQUFJLE9BQU8sY0FBYyxDQUFDLEdBQWYsQ0FBbUIsb0JBQW5CLENBQVAsS0FBb0QsV0FBeEQsRUFBcUU7QUFDakUsRUFBQSxjQUFjLENBQUMsTUFBZixDQUFzQixvQkFBdEIsRUFBNEMsMkJBQTVDO0FBQ0giLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCJpbXBvcnQgeGNlbHNpb3IgZnJvbSBcIi4vaW5kZXhcIlxuLy9AdHMtaWdub3JlXG53aW5kb3cueGNlbHNpb3IgPSB4Y2Vsc2lvcjsiLCJ0eXBlIEVsZW1lbnREZWZpbml0aW9uID0gSFRNTEVsZW1lbnQgfCBzdHJpbmc7XG5jb25zdCBTSE9XX09OX01PQklMRV9DTEFTUyA9IFwic2hvdy1vbi1tb2JpbGVcIjtcbmNvbnN0IFNFQ1RJT05fTkFNRV9BVFRSID0gXCJzZWN0aW9uLW5hbWVcIjtcbmNvbnN0IFNJREVCQVJfQ0xBU1MgPSBcInNpZGViYXJcIjtcbmNvbnN0IE1PQklMRV9TQUZFX1ZJRVcgPSBcIm1vYmlsZS12aWV3LXNhZmVcIjtcblxuY2xhc3MgVXRpbCB7XG5cbiAgICAvKipcbiAgICAgKiByZXR1cm5zIGVsZW1lbnQgZmFsbGJhY2tcbiAgICAgKiBAcGFyYW0gZWwgaHRtbCBlbGVtZW50IG9yIHNlbGVjdG9yXG4gICAgICovXG4gICAgc3RhdGljIG5hdGl2ZUhUTUxFbGVtZW50KGVsOiBFbGVtZW50RGVmaW5pdGlvbik6IEhUTUxFbGVtZW50IHtcbiAgICAgICAgaWYgKHR5cGVvZiBlbCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZWwpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGVsXG4gICAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBNb2JpbGVTaWRlYmFyVXRpbCB7XG5cblxuICAgIC8qKlxuICAgICAqIFdoZW4gb24gc21hbGwgc2NyZWVucywgaWYgbW9iaWxlIHZpZXcgbWFuYWdlbWVudCBpcyBlbmFibGVkIG9uIHNpZGViYXIsXG4gICAgICogc2lkZWJhciBzZWN0aW9ucyB3aWxsIGJlIHNob3duIG9yIGhpZGRlbi4gSWYgc2VjdGlvbk5hbWUgaXMgbm90XG4gICAgICogQHBhcmFtIGVsZW1lbnQgXG4gICAgICogQHBhcmFtIHNlY3Rpb25OYW1lIFxuICAgICAqL1xuICAgIHN0YXRpYyB0b2dnbGVTaWRlYmFyU2VjdGlvbihlbGVtZW50OiBFbGVtZW50RGVmaW5pdGlvbiwgc2VjdGlvbk5hbWU/OiBzdHJpbmcsIHNjcm9sbFVwU2lkZWJhciA9IHRydWUpIHtcbiAgICAgICAgY29uc3QgbmF0aXZlRWxlbWVudCA9IFV0aWwubmF0aXZlSFRNTEVsZW1lbnQoZWxlbWVudCk7XG4gICAgICAgIGNvbnN0IHNpZGViYXJMaXN0ID0gbmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKGAuJHtNT0JJTEVfU0FGRV9WSUVXfSA+IC53cmFwID4gLmlubmVyID4gLiR7U0lERUJBUl9DTEFTU31gKTtcbiAgICAgICAgZm9yIChsZXQgc2lkZWJhckluZGV4ID0gMDsgc2lkZWJhckluZGV4IDwgc2lkZWJhckxpc3QubGVuZ3RoOyBzaWRlYmFySW5kZXgrKykge1xuICAgICAgICAgICAgY29uc3Qgc2lkZWJhciA9IHNpZGViYXJMaXN0W3NpZGViYXJJbmRleF07XG4gICAgICAgICAgICBzaWRlYmFyLmNsYXNzTGlzdC5yZW1vdmUoU0hPV19PTl9NT0JJTEVfQ0xBU1MpO1xuICAgICAgICAgICAgaWYgKHNpZGViYXIuZ2V0QXR0cmlidXRlKFNFQ1RJT05fTkFNRV9BVFRSKSA9PT0gc2VjdGlvbk5hbWUpIHtcbiAgICAgICAgICAgICAgICBzaWRlYmFyLmNsYXNzTGlzdC5hZGQoU0hPV19PTl9NT0JJTEVfQ0xBU1MpO1xuICAgICAgICAgICAgICAgIGlmIChzY3JvbGxVcFNpZGViYXIpIHNpZGViYXIuc2Nyb2xsVG9wID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjb250ZW50RWxlbWVudENsYXNzTGlzdCA9IG5hdGl2ZUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLmNvbnRlbnRgKT8uY2xhc3NMaXN0O1xuICAgICAgICBpZiAoc2VjdGlvbk5hbWUpXG4gICAgICAgICAgICBjb250ZW50RWxlbWVudENsYXNzTGlzdC5hZGQoXCJoaWRlXCIpO1xuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnRlbnRFbGVtZW50Q2xhc3NMaXN0LnJlbW92ZShcImhpZGVcIik7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IHsgVXRpbCwgTW9iaWxlU2lkZWJhclV0aWwgfVxuXG5cbmNvbnN0IGluaXRYY2Vsc2lvckVsZW1lbnQgPSAoZWxlbWVudDogSFRNTEVsZW1lbnQpID0+IHtcbiAgICBjb25zdCB3cmFwU3VwcG9zZWQgPSBlbGVtZW50Py5maXJzdENoaWxkIGFzIEhUTUxFbGVtZW50O1xuICAgIGNvbnN0IGlubmVyU3VwcG9zZWQgPSB3cmFwU3VwcG9zZWQ/LmZpcnN0Q2hpbGQgYXMgSFRNTEVsZW1lbnQ7XG4gICAgaWYgKHdyYXBTdXBwb3NlZD8uY2xhc3NMaXN0Py5jb250YWlucyhcIndyYXBcIikgJiYgaW5uZXJTdXBwb3NlZD8uY2xhc3NMaXN0Py5jb250YWlucyhcImlubmVyXCIpKSB7XG4gICAgICAgIC8vbm90aGluZ1xuICAgIH1cbiAgICBlbHNlIGlmIChlbGVtZW50LmdldEF0dHJpYnV0ZShcIm5vLWF1dG8td3JhcFwiKSA9PSBudWxsKSB7XG4gICAgICAgIC8vIGNyZWF0ZSBcIndyYXBcIiBhbmQgXCJpbm5lclwiIGVsZW1lbnRzIGFuZCBtb3ZlIGNoaWxkcmVuIGludG8gbmV3IFwiaW5uZXJcIiBlbGVtZW50LlxuICAgICAgICBjb25zdCB3cmFwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgd3JhcC5jbGFzc0xpc3QuYWRkKFwid3JhcFwiKVxuICAgICAgICBjb25zdCBpbm5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIGlubmVyLmNsYXNzTGlzdC5hZGQoXCJpbm5lclwiKTtcbiAgICAgICAgd3JhcC5hcHBlbmRDaGlsZChpbm5lcik7XG4gICAgICAgIC8vQWxsIGNoaWxkIGVsZW1lbnRzIChldmVudCB0ZXh0cykgbW92ZWQgdG8gYnkgaW5uZXIuYXBwZW5kIHN1Y2Nlc3NmdWxseVxuICAgICAgICBpbm5lci5hcHBlbmQoLi4uZWxlbWVudC5jaGlsZE5vZGVzKTtcbiAgICAgICAgZWxlbWVudC5hcHBlbmRDaGlsZCh3cmFwKTtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBYY2Vsc2lvckhUTUxFbGVtZW50IGV4dGVuZHMgSFRNTEVsZW1lbnQge1xuICAgIGRyYWdnaW5nSW5uZXJFbGVtZW50OiBIVE1MRWxlbWVudDtcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgKCkgPT4ge1xuICAgICAgICAgICAgaW5pdFhjZWxzaW9yRWxlbWVudCh0aGlzKTtcbiAgICAgICAgICAgIGNvbnN0IGlubmVyID0gdGhpcy5jaGlsZHJlblswXS5jaGlsZHJlblswXTtcbiAgICAgICAgICAgIGZvciAobGV0IGNoaWxkSW5kZXggPSAwOyBjaGlsZEluZGV4IDwgaW5uZXIuY2hpbGRyZW4ubGVuZ3RoOyBjaGlsZEluZGV4KyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpbm5lckNoaWxkID0gaW5uZXIuY2hpbGRyZW5bY2hpbGRJbmRleF0gYXMgSFRNTEVsZW1lbnQgJiB7IHJlYWxQYXJlbnQ6IFhjZWxzaW9ySFRNTEVsZW1lbnQgfTtcbiAgICAgICAgICAgICAgICBpbm5lckNoaWxkLnJlYWxQYXJlbnQgPSB0aGlzO1xuICAgICAgICAgICAgICAgIGlubmVyQ2hpbGQuZHJhZ2dhYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBpbm5lckNoaWxkLmFkZEV2ZW50TGlzdGVuZXIoXCJkcmFnc3RhcnRcIiwgKGV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZHJhZ2dpbmdJbm5lckVsZW1lbnQgPSBpbm5lckNoaWxkO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlubmVyQ2hpbGQuYWRkRXZlbnRMaXN0ZW5lcihcImRyYWdvdmVyXCIsIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGUucmV0dXJuVmFsdWUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpbm5lckNoaWxkLmFkZEV2ZW50TGlzdGVuZXIoXCJkcm9wXCIsIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbm5lckNoaWxkLnJlYWxQYXJlbnQgPT09IHRoaXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnN0IGluZGV4ID0gQXJyYXkucHJvdG90eXBlLmluZGV4T2YuY2FsbChpbm5lckNoaWxkLnBhcmVudEVsZW1lbnQuY2hpbGRyZW4sIHRoaXMuZHJhZ2dpbmdJbm5lckVsZW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5uZXJDaGlsZC5pbnNlcnRBZGphY2VudEVsZW1lbnQoXCJiZWZvcmViZWdpblwiLCB0aGlzLmRyYWdnaW5nSW5uZXJFbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBSb290WGNlbHNpb3JIVE1MRWxlbWVudCBleHRlbmRzIEhUTUxFbGVtZW50IHsgfVxuZXhwb3J0IGNsYXNzIFNjcm9sbGFibGVYY2Vsc2lvckhUTUxFbGVtZW50IGV4dGVuZHMgWGNlbHNpb3JIVE1MRWxlbWVudCB7IH1cbmV4cG9ydCBjbGFzcyBHcmlkVmlld1hjZWxzaW9ySFRNTEVsZW1lbnQgZXh0ZW5kcyBYY2Vsc2lvckhUTUxFbGVtZW50IHsgfVxuaWYgKHR5cGVvZiBjdXN0b21FbGVtZW50cy5nZXQoXCJ4Y2Vsc2lvci1yb290XCIpID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwieGNlbHNpb3Itcm9vdFwiLCBSb290WGNlbHNpb3JIVE1MRWxlbWVudCk7XG59XG5pZiAodHlwZW9mIGN1c3RvbUVsZW1lbnRzLmdldChcInhjZWxzaW9yLXNjcm9sbGFibGVcIikgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICBjdXN0b21FbGVtZW50cy5kZWZpbmUoXCJ4Y2Vsc2lvci1zY3JvbGxhYmxlXCIsIFNjcm9sbGFibGVYY2Vsc2lvckhUTUxFbGVtZW50KTtcbn1cbmlmICh0eXBlb2YgY3VzdG9tRWxlbWVudHMuZ2V0KFwieGNlbHNpb3ItZ3JpZC12aWV3XCIpID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwieGNlbHNpb3ItZ3JpZC12aWV3XCIsIEdyaWRWaWV3WGNlbHNpb3JIVE1MRWxlbWVudCk7XG59XG4iXX0=
